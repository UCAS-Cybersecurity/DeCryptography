(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{4466:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/edit/[id]",function(){return l(6533)}])},569:function(e,t,l){"use strict";l.d(t,{Z:function(){return u}});var n=l(5893),r=l(2016);l(113);var a=l(1415),o=l(8987),i=l(7294),s=l(4907);function u(e){let{defaultImage:t,aspectRatio:l,onFileChange:u}=e,[d,c]=(0,i.useState)(t);(0,i.useEffect)(()=>{c(t)},[t]);let[f,x]=(0,i.useState)(),[p,h]=(0,i.useState)(),m=()=>{if(void 0!==p){var e;c(e=p.getCroppedCanvas().toDataURL()),u(function(e,t){let l=e.split(","),n=l[0],r=null==n?void 0:n.match(/:(.*?);/)[1],a=atob(l[1]),o=a.length,i=new Uint8Array(o);for(;o--;)i[o]=a.charCodeAt(o);return new File([i],t,{type:r})}(e,"image.png"))}},b=(0,i.useRef)(null),g=e=>{let t;e.preventDefault(),e.dataTransfer?t=e.dataTransfer.files:e.target&&(t=e.target.files);let l=new FileReader;l.onload=()=>{x(l.result)},l.readAsDataURL(t[0])};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"file",accept:"image/*.png, image/*.jpg, image/*.jpeg",onChange:g,className:"hidden",ref:b}),f?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:(0,n.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:(0,n.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-slate-800 outline-none focus:outline-none",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between p-5 border-b border-solid border-gray-900 rounded-t",children:[(0,n.jsx)("h3",{className:"text-3xl font-semibold",children:"Crop Profile"}),(0,n.jsx)("button",{className:"p-1 ml-auto bg-transparent border-0 float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:()=>x(null),children:(0,n.jsx)(a.Z,{className:"h-6 w-6"})})]}),(0,n.jsx)("div",{className:"relative p-6 flex-auto",children:(0,n.jsx)(r.Z,{className:"w-full rounded-lg",src:f,style:{height:400,width:"100%"},aspectRatio:null!=l?l:1,onInitialized(e){h(e)},guides:!1,async crop(e){}})}),(0,n.jsxs)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-gray-900 rounded-b",children:[(0,n.jsx)("button",{className:"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:()=>x(null),children:"Close"}),(0,n.jsx)("button",{className:"bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick(){m(),x(null)},children:"Save Changes"})]})]})})}),(0,n.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null,(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full rounded bg-gray-200 cursor-pointer overflow-hidden relative",onClick(){var e;return null===(e=b.current)||void 0===e?void 0:e.click()},children:[(0,n.jsx)("div",{className:"top-0 left-0 w-full h-full opacity-0 hover:opacity-100 transition-all bg-opacity-50 z-10 absolute bg-slate-500",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[(0,n.jsx)(o.Z,{className:"h-6 w-6 text-white"}),(0,n.jsx)("p",{className:"text-white",children:"Click to change"})]})}),(0,n.jsx)(s.Z,{className:"w-full h-full object-cover",src:null!=d&&""!=d?d:"https://www.slntechnologies.com/wp-content/uploads/2017/08/ef3-placeholder-image.jpg",alt:"cropped",fill:!0})]})]})}},138:function(e,t,l){"use strict";l.d(t,{IH:function(){return o},Od:function(){return s},Vx:function(){return i},fH:function(){return a}});var n=l(3247),r=l(8323);let a=(0,n.hJ)(r.db,"articles"),o=async e=>{var t,l,o,i,s;e.createdAt=new Date,e.creator_uid=null===(t=r.I.currentUser)||void 0===t?void 0:t.uid,(null===(l=r.I.currentUser)||void 0===l?void 0:l.displayName)&&(e.creator_name=null===(o=r.I.currentUser)||void 0===o?void 0:o.displayName),(null===(i=r.I.currentUser)||void 0===i?void 0:i.photoURL)&&(e.creator_photoURL=null===(s=r.I.currentUser)||void 0===s?void 0:s.photoURL),delete e.image_binary,delete e.content;let u=await (0,n.ET)(a,e);return u.id},i=async e=>{e.updatedAt=new Date;let t=(0,n.JU)(a,e.uid);await (0,n.pl)(t,e,{merge:!0})},s=async e=>{let t=(0,n.JU)(a,e);await (0,n.oe)(t)}},9751:function(e,t,l){"use strict";function n(e){let t=null,l=null;try{var n,r,a,o;t=null===(n=e.data())||void 0===n?void 0:null===(r=n.createdAt)||void 0===r?void 0:r.toDate(),l=null===(a=e.data())||void 0===a?void 0:null===(o=a.createdAt)||void 0===o?void 0:o.toDate()}catch(i){}return{uid:null==e?void 0:e.id,...null==e?void 0:e.data(),createdAt:t,updatedAt:l}}function r(e){if(!e)return null;let t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:null}l.d(t,{Q:function(){return n},q:function(){return r}})},5527:function(e,t,l){"use strict";l.d(t,{Z:function(){return o}});var n=l(6650),r=l(5933),a=l(8323);function o(){let e=(0,r.V)();async function t(t){let{label:l,file:r,path:o,onDone:i=()=>{},onError:s=()=>{},onProgress:u=()=>{}}=t;if(!r)return!0;let d="",c=(0,n.iH)(a.t,o),f=(0,n.B0)(c,r);return null==e||e.addUpload({label:l,progress:0,size:r.size}),await f.on("state_changed",t=>{null==e||e.updateUpload({label:l,progress:t.bytesTransferred/t.totalBytes*100,size:r.size});let n=t.bytesTransferred/t.totalBytes*100;switch(console.log("Upload is "+n+"% done"),u(n),t.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}},t=>{console.log(t),s(t),null==e||e.removeUpload({label:l,progress:100,size:r.size})},async()=>{try{d=await (0,n.Jt)(f.snapshot.ref),i(d),null==e||e.updateUpload({label:l,progress:100,size:r.size})}catch(t){console.log(t),s(t)}}),!1}return{uploadImage:t,indicators:e}}},6533:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return C}});var n=l(5893),r=l(7294),a=l(175),o=l(8974),i=l(7015),s=l(8499),u=l(168),d=l(5152),c=l.n(d);l(91);var f=l(138),x=l(1163),p=l(569),h=l(8323),m=l(2512),b=l(5527),g=l(3247),v=l(9751);let w=c()(()=>Promise.all([l.e(937),l.e(156)]).then(l.t.bind(l,1167,23)),{loadableGenerated:{webpack:()=>[1167]},ssr:!1}),y=[{name:"Content",icon:o.Z,build:(e,t)=>(0,n.jsx)("div",{className:"w-full h-full",children:(0,n.jsx)(w,{className:"h-full",value:e.content,onChange:l=>t({...e,content:l})})})},{name:"Code",icon:i.Z,build:(e,t)=>(0,n.jsx)("div",{className:"h-full",children:(0,n.jsx)("textarea",{className:"w-full h-full p-4 border border-gray-300 block",cols:50,value:e.content,onChange:l=>t({...e,content:l.target.value})})})},{name:"PDF",icon:s.Z,build:(e,t,l,r,a)=>(0,n.jsx)(j,{pdf:l,setPdf:r,setWaiting:a})}];function j(e){let{pdf:t,setPdf:l,setWaiting:a}=e,[o,i]=(0,r.useState)(!1),s=(0,b.Z)(),d=(0,r.useCallback)(e=>{var t;0!==e.length&&(i(!0),a(!0),s.uploadImage({file:e[0],label:"Pdf file",onDone(e){i(!1),a(!1),l(e)},path:"pdf/articles/".concat(null===(t=h.I.currentUser)||void 0===t?void 0:t.uid,".").concat(new Date().getTime(),".pdf")}))},[]),{getRootProps:c,getInputProps:f,isDragActive:x}=(0,m.uI)({accept:{"application/pdf":[".pdf"]},multiple:!1,onDrop:d});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"w-full h-64 p-4 border border-gray-300 text-center flex items-center justify-center",...c(),children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(u.Z,{className:"w-10 h-10 mx-auto my-2"}),x?(0,n.jsx)("p",{children:"Drop the files here ..."}):(0,n.jsx)("p",{children:"Drop files here, or click to select files"})]}),(0,n.jsx)("input",{...f()})]}),(t||o)&&(0,n.jsxs)("div",{className:"w-full flex items-center justify-start p-4 bg-gradient-to-r rounded-b-lg text-white font-bold from-blue to-green",children:[(0,n.jsx)(u.Z,{className:"w-10 h-10 my-2"}),(0,n.jsx)("a",{href:o?"":t,target:"_blank",className:"line-clamp-1 w-full",rel:"noreferrer",children:o?"loading...":"Uploaded ".concat(t)})]})]})}function N(){var e,t,l,o;let i=(0,x.useRouter)(),s=(0,a.a)(),u=(0,b.Z)(),[d,c]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1),[w,j]=(0,r.useState)({content:"",title:"",thumbnail:"",shortDescription:"",youtubeLink:"",contentUrl:"",youtubeLink2:"",replLink:""}),[N,k]=(0,r.useState)(0),[C,U]=(0,r.useState)(!1),[_,D]=(0,r.useState)(""),[S,E]=(0,r.useState)(!1),[z,T]=(0,r.useState)(""),Z=null==i?void 0:null===(e=i.query)||void 0===e?void 0:e.id,[L,I]=(0,r.useState)(!0),[R,A]=(0,r.useState)(!1);async function F(e){let t=await fetch(e);return await t.text()}let{currentUser:B}=(0,a.a)();async function P(e){U(!0),await (0,f.Vx)(e),i.push("/"),U(!1)}return(0,r.useEffect)(()=>{(async function(){I(!0);let e=(0,g.JU)(f.fH,Z);j((0,v.Q)(await (0,g.QT)(e))),I(!1)})()},[Z]),(0,r.useEffect)(()=>{R||F(null==w?void 0:w.contentUrl).then(e=>{(null==w?void 0:w.contentUrl)&&!(null==w?void 0:w.content)&&(A(!0),j({...w,content:e}))})},[w]),(0,r.useEffect)(()=>{var e;w&&(null==w?void 0:w.creator_uid)&&""!==w.creator_uid&&(null==w?void 0:w.creator_uid)!==(null==s?void 0:null===(e=s.currentUser)||void 0===e?void 0:e.uid)&&i.push("/")},[w,null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t.uid]),(0,r.useEffect)(()=>{_&&j({...w,thumbnail:_})},[_]),(0,r.useEffect)(()=>{z&&j({...w,contentUrl:z})},[z]),(0,r.useEffect)(()=>{d&&j({...w,pdfUrl:d})},[d]),(0,r.useEffect)(()=>{var e,t;if(w.contentUrl&&w.thumbnail&&S&&(null===(e=u.indicators)||void 0===e?void 0:null===(t=e.uploads)||void 0===t?void 0:t.length)!==0){if(C)return;P(w)}},[w,S,null===(l=u.indicators)||void 0===l?void 0:l.uploads]),(0,r.useEffect)(()=>{B&&(null==B?void 0:B.uid)||i.push("/login")},[B,i]),(0,n.jsx)("div",{className:"m-auto my-4 mt-6 max-w-5xl px-2 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex-1 text-xs sm:text-sm flex flex-col justify-center items-center gap-2 sm:gap-4 max-w-6xl w-full",children:[(0,n.jsx)("div",{className:"aspect-video w-96 ring-green ring-1 rounded ring-offset-2",children:(0,n.jsx)(p.Z,{defaultImage:null!==(o=w.thumbnail)&&void 0!==o?o:"",aspectRatio:16/9,onFileChange(e){j({...w,image_binary:e})}})}),(0,n.jsx)("input",{type:"text",value:w.title,onChange:e=>j({...w,title:e.target.value}),placeholder:"Title",className:"outline-none duration-300 border-b-2 border-solid border-slate-300 text-lg focus:border-blue text-slate-900 p-2 w-full"}),(0,n.jsx)("textarea",{placeholder:"Short Description",className:"outline-none text-slate-900 p-2 w-full duration-300 border-b-2 border-solid border-slate-300 text-lg focus:border-blue",rows:4,cols:50,value:w.shortDescription,onChange:e=>j({...w,shortDescription:e.target.value})}),(0,n.jsx)("input",{value:w.youtubeLink,onChange:e=>j({...w,youtubeLink:e.target.value}),type:"text",placeholder:"Youtube iframe",className:"outline-none text-slate-900 p-2 w-full duration-300 border-b-2 border-solid border-slate-300 text-lg focus:border-blue"}),(0,n.jsx)("input",{value:w.youtubeLink2,onChange:e=>j({...w,youtubeLink2:e.target.value}),type:"text",placeholder:"Youtube iframe Secondary",className:"outline-none text-slate-900 p-2 w-full duration-300 border-b-2 border-solid border-slate-300 text-lg focus:border-blue"}),(0,n.jsx)("input",{value:w.replLink,onChange:e=>j({...w,replLink:e.target.value}),type:"text",placeholder:"Repl link",className:"outline-none text-slate-900 p-2 w-full duration-300 border-b-2 border-solid border-slate-300 text-lg focus:border-blue"}),(0,n.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-700 w-full",children:[(0,n.jsx)("ul",{className:"flex flex-wrap -mb-px text-sm font-medium text-center text-gray-500 dark:text-gray-400",children:y.map((e,t)=>(0,n.jsx)("li",{className:"mr-2",children:(0,n.jsxs)("button",{onClick:()=>k(t),className:t===N?"inline-flex p-4 text-blue rounded-t-lg border-b-2 border-blue  active dark:text-blue dark:border-blue group":"inline-flex p-4 rounded-t-lg border-b-2 border-transparent hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300 group","aria-current":"page",children:[(0,n.jsx)(e.icon,{className:t===N?"mr-2 w-5 h-5 text-blue-600 group-hover:text-blue-500 dark:text-blue-500 dark:group-hover:text-blue-400":"mr-2 w-5 h-5 text-gray-400 group-hover:text-gray-500 dark:text-gray-500 dark:group-hover:text-gray-300"}),e.name]})},t))}),(0,n.jsx)("div",{className:"h-96 mb-6 pb-6 w-full min-w-full",children:y.filter((e,t)=>t===N)[0].build(w,j,d,c,m)}),(0,n.jsxs)("button",{disabled:C||h,onClick:function(){let e=null==w?void 0:w.image_binary;u.uploadImage({file:e,label:"Article Thumbnail",onDone:e=>D(e),path:"images/articles/".concat(null==B?void 0:B.uid,".").concat(new Date().getTime(),".png")});let t=w.content,l=new Blob([t],{type:"text/html"}),n=new File([l],"index.html",{type:"text/html"});u.uploadImage({file:n,label:"Article Content",onDone:e=>T(e),path:"content/articles/".concat(null==B?void 0:B.uid,".").concat(new Date().getTime(),".html")}),E(!0)},className:"border-0 outline-none ring-0 flex items-center justify-center w-full text-lg py-2 duration-300 relative overflow-hidden from-blue to-green text-white enabled:hover:shadow-lg disabled:bg-slate-400 enabled:bg-gradient-to-r",children:[C&&(0,n.jsxs)("svg",{className:"animate-spin text-slate-900",version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 40 40",enableBackground:"new 0 0 40 40",children:[(0,n.jsx)("path",{opacity:"0.2",fill:"#fff",d:"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946 s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634 c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"}),(0,n.jsx)("path",{fill:"#fff",d:"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0 C22.32,8.481,24.301,9.057,26.013,10.047z",children:(0,n.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"0.5s",repeatCount:"indefinite"})})]}),"Submit"]})]})]})})}var k=l(4907);function C(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("section",{className:"relative",children:[(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue to-green w-full pt-6 mb-10 h-80 flex items-center",style:{borderBottomRightRadius:"70px"},children:(0,n.jsx)("h1",{className:"text-6xl font-light text-white m-auto text-center",children:"Edit Article"})}),(0,n.jsx)("div",{className:"absolute ",style:{bottom:0,left:0,width:"200px",height:"200px"},children:(0,n.jsx)(k.Z,{className:"",src:"/logo-overlay.png",alt:"Ucas",fill:!0})})]}),(0,n.jsx)(N,{})]})}}},function(e){e.O(0,[966,793,774,888,179],function(){return e(e.s=4466)}),_N_E=e.O()}]);
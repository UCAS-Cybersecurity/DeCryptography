(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[580],{2913:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/[id]",function(){return n(5518)}])},8796:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var l=n(5893),i=n(8240);function r(e){let{children:t,className:n}=e;return(0,l.jsxs)("section",{className:"relative",children:[(0,l.jsx)("div",{className:"bg-gradient-to-r from-blue to-green w-full pt-6 mb-10 h-80 flex items-center ".concat(n),style:{borderBottomRightRadius:"70px"},children:t}),(0,l.jsx)("div",{className:"absolute ",style:{bottom:0,left:0,width:"200px",height:"200px"},children:(0,l.jsx)(i.Z,{className:"",src:"/logo-overlay.png",alt:"Ucas",fill:!0})})]})}},138:function(e,t,n){"use strict";n.d(t,{IH:function(){return o},Od:function(){return u},U2:function(){return s},Vx:function(){return c},fH:function(){return a}});var l=n(3247),i=n(8323),r=n(9751);let a=(0,l.hJ)(i.db,"articles"),o=async e=>{var t,n,r,o,c;e.createdAt=new Date,e.creator_uid=null===(t=i.I.currentUser)||void 0===t?void 0:t.uid,(null===(n=i.I.currentUser)||void 0===n?void 0:n.displayName)&&(e.creator_name=null===(r=i.I.currentUser)||void 0===r?void 0:r.displayName),(null===(o=i.I.currentUser)||void 0===o?void 0:o.photoURL)&&(e.creator_photoURL=null===(c=i.I.currentUser)||void 0===c?void 0:c.photoURL),delete e.image_binary,delete e.content;let u=await (0,l.ET)(a,e);return u.id},c=async e=>{e.updatedAt=new Date;let t=(0,l.JU)(a,e.uid);await (0,l.pl)(t,e,{merge:!0})},u=async e=>{let t=(0,l.JU)(a,e);await (0,l.oe)(t)},s=async e=>{let t=(0,l.JU)(a,e),n=await (0,l.QT)(t);if(!n.exists())return null;{let i=(0,r.Q)(n);return i.contentUrl&&(i.content=await d(i.contentUrl)),i}};async function d(e){return await (await fetch(e)).text()}},9751:function(e,t,n){"use strict";function l(e){let t=null,n=null;try{var l,i,r,a;t=null===(l=e.data())||void 0===l?void 0:null===(i=l.createdAt)||void 0===i?void 0:i.toDate(),n=null===(r=e.data())||void 0===r?void 0:null===(a=r.createdAt)||void 0===a?void 0:a.toDate()}catch(o){}return{uid:null==e?void 0:e.id,...null==e?void 0:e.data(),createdAt:t,updatedAt:n}}function i(e){if(!e)return null;let t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:null}n.d(t,{Q:function(){return l},q:function(){return i}})},5518:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var l=n(5893),i=n(9751),r=n(7294);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}var o=["html","dangerouslySetInnerHTML"],c=function(e){var t=e.html,n=function(e,t){if(null==e)return{};var n,l,i={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,o),l=(0,r.useRef)(null);return(0,r.useEffect)(function(){if(!t||!l.current)throw Error("html prop cant't be null");var e=document.createRange().createContextualFragment(t);l.current.innerHTML="",l.current.appendChild(e)},[t,l]),r.createElement("div",a({},n,{ref:l}))},u=n(8240),s=n(138),d=n(1664),h=n.n(d),m=n(1163),v=n(175),f=n(8796),x=n(381),p=n.n(x);function w(){var e;let{article:t,loading:n,router:a}=function(){var e,t,n;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,m.useRouter)(),a=null!==(n=l.id)&&void 0!==n?n:null==i?void 0:null===(e=i.query)||void 0===e?void 0:e.id,o=(0,v.a)(),[c,u]=(0,r.useState)(),[d,h]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(0,s.U2)(a).then(e=>{var t;let n=(null==o?void 0:null===(t=o.currentUser)||void 0===t?void 0:t.uid)===(null==e?void 0:e.creator_uid);u({...e,canEdit:n,canDelete:n}),h(!1)})},[l.id,null==i?void 0:null===(t=i.query)||void 0===t?void 0:t.id]),{article:c,loading:d,router:i}}();return n?(0,l.jsx)(f.Z,{className:"h-auto",children:(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center w-full pb-8 px-2",children:[(0,l.jsx)("h1",{className:"text-4xl font-light text-white m-auto max-w-5xl text-center py-5",children:"Loading..."}),(0,l.jsx)(u.Z,{src:"/indicator.png",className:"w-20 h-20 rounded-full my-2 shadow-lg animate-spin",width:80,height:80})]})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.Z,{className:"h-auto",children:(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center w-full pb-8 px-2",children:[(0,l.jsx)("h1",{className:"text-4xl font-light text-white m-auto max-w-5xl text-center py-5",children:null==t?void 0:t.title}),(0,l.jsx)(u.Z,{className:"w-20 h-20 rounded-full my-2 shadow-lg object-cover",src:null!==(e=null==t?void 0:t.creator_photoURL)&&void 0!==e?e:"https://www.slntechnologies.com/wp-content/uploads/2017/08/ef3-placeholder-image.jpg",alt:"Avatar",height:80,width:80}),(0,l.jsxs)("div",{className:"text-lg text-white text-center leading-none",children:[(0,l.jsxs)("p",{className:"p-1",children:[(0,l.jsx)("span",{className:"italic font-light pr-1",children:"By "}),(0,l.jsx)("span",{className:"font-semibold",children:null==t?void 0:t.creator_name})]}),(0,l.jsx)("p",{className:"italic font-light",children:(0,l.jsx)(l.Fragment,{children:(null==t?void 0:t.createdAt)&&p()(null==t?void 0:t.createdAt).format("LL")})})]}),(null==t?void 0:t.canEdit)&&(0,l.jsxs)("div",{className:"p-2",children:[(0,l.jsx)("span",{onClick(){(0,s.Od)(t.uid).then(()=>{a.back()})},className:"text-red-600 mr-2 cursor-pointer",children:"Delete"}),(0,l.jsx)(h(),{href:"/article/edit/".concat(t.uid),className:"text-gray-800",children:"Edit"})]})]})}),(0,l.jsxs)("div",{className:"m-auto max-w-5xl px-2 sm:px-6 lg:px-8",children:[(0,l.jsx)("p",{className:"text-gray-500",children:null==t?void 0:t.shortDescription}),(0,l.jsx)("div",{className:"max-w-4xl m-auto",children:(0,l.jsx)("div",{className:"aspect-video max-w-6xl mx-auto my-4 relative",children:(null==t?void 0:t.thumbnail)&&(0,l.jsx)(u.Z,{src:null==t?void 0:t.thumbnail,alt:"Picture of the author",className:"rounded",style:{width:"100%"},fill:!0})})}),(null==t?void 0:t.content)&&(null==t?void 0:t.content)!=""&&(0,l.jsx)(c,{html:null==t?void 0:t.content,className:"my-4"}),(null==t?void 0:t.pdfUrl)&&(0,l.jsx)("iframe",{src:null==t?void 0:t.pdfUrl,className:"w-full h-screen"}),t&&(0,i.q)(null==t?void 0:t.youtubeLink)&&(0,l.jsx)("iframe",{className:"w-full aspect-video rounded-sm my-10 print:hidden",src:"https://www.youtube.com/embed/".concat((0,i.q)(null==t?void 0:t.youtubeLink)),allowFullScreen:!0}),t&&(0,i.q)(null==t?void 0:t.youtubeLink2)&&(0,l.jsx)("iframe",{className:"w-full aspect-video rounded-sm my-10 print:hidden",src:"https://www.youtube.com/embed/".concat((0,i.q)(null==t?void 0:t.youtubeLink2)),allowFullScreen:!0})]})]})}},1163:function(e,t,n){e.exports=n(880)}},function(e){e.O(0,[885,774,888,179],function(){return e(e.s=2913)}),_N_E=e.O()}]);
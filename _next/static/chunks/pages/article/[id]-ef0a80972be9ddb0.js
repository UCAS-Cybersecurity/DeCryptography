(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[580],{2913:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/[id]",function(){return n(8151)}])},138:function(e,t,n){"use strict";n.d(t,{IH:function(){return u},Od:function(){return o},Vx:function(){return a},fH:function(){return i}});var l=n(3247),r=n(8323);let i=(0,l.hJ)(r.db,"articles"),u=async e=>{var t,n,u,a,o;e.createdAt=new Date,e.creator_uid=null===(t=r.I.currentUser)||void 0===t?void 0:t.uid,(null===(n=r.I.currentUser)||void 0===n?void 0:n.displayName)&&(e.creator_name=null===(u=r.I.currentUser)||void 0===u?void 0:u.displayName),(null===(a=r.I.currentUser)||void 0===a?void 0:a.photoURL)&&(e.creator_photoURL=null===(o=r.I.currentUser)||void 0===o?void 0:o.photoURL),delete e.image_binary,delete e.content;let c=await (0,l.ET)(i,e);return c.id},a=async e=>{e.updatedAt=new Date;let t=(0,l.JU)(i,e.uid);await (0,l.pl)(t,e,{merge:!0})},o=async e=>{let t=(0,l.JU)(i,e);await (0,l.oe)(t)}},9751:function(e,t,n){"use strict";function l(e){let t=null,n=null;try{var l,r,i,u;t=null===(l=e.data())||void 0===l?void 0:null===(r=l.createdAt)||void 0===r?void 0:r.toDate(),n=null===(i=e.data())||void 0===i?void 0:null===(u=i.createdAt)||void 0===u?void 0:u.toDate()}catch(a){}return{uid:null==e?void 0:e.id,...null==e?void 0:e.data(),createdAt:t,updatedAt:n}}function r(e){if(!e)return null;let t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:null}n.d(t,{Q:function(){return l},q:function(){return r}})},8151:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var l=n(5893),r=n(3247),i=n(1163),u=n(7294),a=n(138),o=n(9751);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}var d=["html","dangerouslySetInnerHTML"],s=function(e){var t=e.html,n=function(e,t){if(null==e)return{};var n,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)n=i[l],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,d),l=(0,u.useRef)(null);return(0,u.useEffect)(function(){if(!t||!l.current)throw Error("html prop cant't be null");var e=document.createRange().createContextualFragment(t);l.current.innerHTML="",l.current.appendChild(e)},[t,l]),u.createElement("div",c({},n,{ref:l}))},v=n(4907),f=n(1664),m=n.n(f),h=n(175);function x(){var e,t,n,c;let d=(0,i.useRouter)(),f=null==d?void 0:null===(e=d.query)||void 0===e?void 0:e.id,[x,p]=(0,u.useState)(),w=(0,h.a)(),[y,b]=(0,u.useState)(!0),[j,N]=(0,u.useState)(!1);async function g(e){return await (await fetch(e)).text()}return(0,u.useEffect)(()=>{(async function(){b(!0);let e=(0,r.JU)(a.fH,f);p((0,o.Q)(await (0,r.QT)(e))),b(!1)})()},[f]),(0,u.useEffect)(()=>{j||g(null==x?void 0:x.contentUrl).then(e=>{(null==x?void 0:x.contentUrl)&&!(null==x?void 0:x.content)&&(N(!0),p({...x,content:e}))})},[x]),(0,l.jsxs)("div",{className:"m-auto max-w-5xl px-2 sm:px-6 lg:px-8",children:[(0,l.jsx)("div",{className:"max-w-4xl m-auto",children:(0,l.jsx)("div",{className:"aspect-video max-w-6xl mx-auto my-4 relative",children:(null==x?void 0:x.thumbnail)&&(0,l.jsx)(v.Z,{src:null==x?void 0:x.thumbnail,alt:"Picture of the author",className:"rounded",style:{width:"100%"},fill:!0})})}),(0,l.jsxs)("div",{className:"flex justify-between my-2",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:null==x?void 0:x.title}),(null==w?void 0:null===(t=w.currentUser)||void 0===t?void 0:t.uid)==(null==x?void 0:x.creator_uid)&&(0,l.jsxs)("div",{className:"font-bold",children:[(0,l.jsx)("span",{onClick(){(0,a.Od)(f).then(()=>{d.back()})},className:"text-red-600 mr-2 cursor-pointer",children:"Delete"}),(0,l.jsx)(m(),{href:"/article/edit/".concat(f),className:"text-green",children:"Edit"})]})]}),(0,l.jsxs)("div",{className:"flex items-center my-2",children:[(0,l.jsx)(v.Z,{className:"w-20 h-20 rounded-full mr-4",src:null!==(n=null==x?void 0:x.creator_photoURL)&&void 0!==n?n:"https://www.slntechnologies.com/wp-content/uploads/2017/08/ef3-placeholder-image.jpg",alt:"Avatar",height:80,width:80}),(0,l.jsxs)("div",{className:"text",children:[(0,l.jsx)("p",{className:"text-gray-500",children:null==x?void 0:x.creator_name}),(0,l.jsx)("p",{className:"text-gray-600",children:(0,l.jsx)(l.Fragment,{children:new Date(null!==(c=null==x?void 0:x.createdAt)&&void 0!==c?c:"").toLocaleDateString()})})]})]}),(0,l.jsx)("p",{className:"text-gray-500",children:null==x?void 0:x.shortDescription}),(null==x?void 0:x.content)&&(null==x?void 0:x.content)!=""&&(0,l.jsx)(s,{html:null==x?void 0:x.content,className:"my-4"}),(null==x?void 0:x.pdfUrl)&&(0,l.jsx)("iframe",{src:null==x?void 0:x.pdfUrl,className:"w-full h-screen"}),x&&(0,o.q)(null==x?void 0:x.youtubeLink)&&(0,l.jsx)("iframe",{className:"w-full aspect-video rounded-sm my-10",src:"https://www.youtube.com/embed/".concat((0,o.q)(null==x?void 0:x.youtubeLink)),allowFullScreen:!0}),x&&(0,o.q)(null==x?void 0:x.youtubeLink2)&&(0,l.jsx)("iframe",{className:"w-full aspect-video rounded-sm my-10",src:"https://www.youtube.com/embed/".concat((0,o.q)(null==x?void 0:x.youtubeLink2)),allowFullScreen:!0})]})}},1163:function(e,t,n){e.exports=n(880)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2913)}),_N_E=e.O()}]);